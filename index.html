<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Muslim Army</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: #0a1f44;
      color: #66b2ff;
      overflow: hidden;
    }
    #camera {
      width: 100vw;
      height: 100vh;
      object-fit: cover;
      position: absolute;
      top: 0;
      left: 0;
      z-index: -1;
      filter: brightness(0.8) contrast(1.1);
    }
    #overlay {
      position: absolute;
      width: 100vw;
      height: 100vh;
      background: rgba(10, 31, 68, 0.5);
      pointer-events: none;
    }
    #header {
      position: absolute;
      top: 20px;
      left: 20px;
      background: rgba(0, 45, 115, 0.85);
      color: #a9d1ff;
      padding: 10px 25px;
      font-size: 20px;
      border-left: 5px solid #66b2ff;
      border-radius: 5px;
      font-weight: 600;
      z-index: 10;
    }
    #info {
      position: absolute;
      bottom: 20px;
      left: 20px;
      background: rgba(0, 45, 115, 0.85);
      color: #cce4ff;
      padding: 15px;
      border-radius: 12px;
      font-size: 16px;
      max-width: 85vw;
      max-height: 150px;
      overflow-y: auto;
      box-shadow: 0 0 15px #66b2ff;
      z-index: 10;
      white-space: pre-wrap;
    }
    #status {
      position: absolute;
      top: 20px;
      right: 20px;
      background: rgba(0, 45, 115, 0.85);
      color: #66b2ff;
      padding: 12px 20px;
      border-radius: 8px;
      font-weight: 600;
      box-shadow: 0 0 8px #3399ff;
      z-index: 10;
    }
  </style>
</head>
<body>
  <video id="camera" autoplay muted playsinline></video>
  <div id="overlay"></div>
  <div id="header">üß† Muslim Army Vision OS</div>
  <div id="info">‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶π‡¶ö‡ßç‡¶õ‡ßá... ‡¶ï‡¶•‡¶æ ‡¶¨‡¶≤‡ßÅ‡¶®...</div>
  <div id="status">‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏: ‡¶∂‡ßÅ‡¶®‡¶õ‡¶ø...</div>

  <script>
    const camera = document.getElementById('camera');
    const info = document.getElementById('info');
    const status = document.getElementById('status');

    // ‡¶ï‡ßç‡¶Ø‡¶æ‡¶Æ‡ßá‡¶∞‡¶æ ‡¶ö‡¶æ‡¶≤‡ßÅ
    navigator.mediaDevices.getUserMedia({ video: true, audio: true })
      .then(stream => {
        camera.srcObject = stream;
      })
      .catch(err => {
        info.textContent = '‡¶ï‡ßç‡¶Ø‡¶æ‡¶Æ‡ßá‡¶∞‡¶æ/‡¶Æ‡¶æ‡¶á‡¶ï‡ßç‡¶∞‡ßã‡¶´‡ßã‡¶® ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶π‡ßü‡¶®‡¶ø: ' + err.message;
      });

    // ‡¶≠‡ßü‡ßá‡¶∏ ‡¶∞‡¶ø‡¶ï‡¶ó‡¶®‡¶ø‡¶∂‡¶®
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    if (!SpeechRecognition) {
      info.textContent = '‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞‡ßá ‡¶≠‡ßü‡ßá‡¶∏ ‡¶∞‡¶ø‡¶ï‡¶ó‡¶®‡¶ø‡¶∂‡¶® ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶®‡ßá‡¶á‡•§';
    }

    const recognition = new SpeechRecognition();
    recognition.lang = 'bn-BD';
    recognition.interimResults = false;
    recognition.continuous = true;

    recognition.onstart = () => {
      status.textContent = '‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏: ‡¶∂‡ßÅ‡¶®‡¶õ‡¶ø...';
    };

    recognition.onerror = (event) => {
      status.textContent = '‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø: ' + event.error;
    };

    recognition.onend = () => {
      status.textContent = '‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏: ‡¶™‡ßÅ‡¶®‡¶∞‡¶æ‡ßü ‡¶∂‡ßÅ‡¶®‡¶õ‡¶ø...';
      recognition.start(); // ‡¶∞‡¶ø‡¶∏‡ßç‡¶ü‡¶æ‡¶∞‡ßç‡¶ü ‡¶∏‡ßç‡¶¨‡ßü‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡ßü
    };

    recognition.onresult = async (event) => {
      const speechText = event.results[event.results.length - 1][0].transcript.trim();
      info.textContent = `‡¶Ü‡¶™‡¶®‡¶ø ‡¶¨‡¶≤‡¶≤‡ßá‡¶®: \"${speechText}\"\nAI ‡¶ö‡¶ø‡¶®‡ßç‡¶§‡¶æ ‡¶ï‡¶∞‡¶õ‡ßá...`;

      try {
        const encodedQuestion = encodeURIComponent(speechText);
        const apiURL = `https://chatgpt.apinepdev.workers.dev/?question=${encodedQuestion}`;

        const res = await fetch(apiURL);
        const answer = await res.text();

        info.textContent = answer;

        const speak = new SpeechSynthesisUtterance(answer);
        speak.lang = 'bn-BD';
        speechSynthesis.speak(speak);
      } catch (err) {
        info.textContent = '‚ö†Ô∏è ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶Ü‡¶®‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá: ' + err.message;
      }
    };

    // ‡¶≠‡ßü‡ßá‡¶∏ ‡¶∂‡ßÅ‡¶∞‡ßÅ
    recognition.start();
  </script>
</body>
</html>
